<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta content="IE=edge" http-equiv="X-UA-Compatible" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <title>Modern OpenGL 02 - Textures — Tom Dalling</title>
    <link href="/style.css" rel="stylesheet" />
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" />
    <link type="text/css" rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro" />
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  <link rel="canonical" href="/blog/modern-opengl/02-textures/" /></head>

  <body>

    <div class="container">

      <div class="row">
        <div class="col-md-12">
          <nav role="navigation" class="navbar navbar-default">
            <div class="container-fluid">
              <div class="navbar-header">
                <button data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" class="navbar-toggle" type="button">
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </button>
                <a href="/" class="navbar-brand">Tom Dalling</a>
              </div>

              <div id="bs-example-navbar-collapse-1" class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                  <li><a href="/">Home</a></li>
                  <li><a href="/blog/">Blog</a></li>
                </ul>
              </div>
            </div>
          </nav>
        </div>
      </div>

      <div class="row">

        <main class="col-md-8"><article class="post post-single">

  <header>
    <h1><a href="/blog/modern-opengl/02-textures/">Modern OpenGL 02 - Textures</a></h1>
    <small class="meta">
      <span class="post-date">02 Dec, 2012</span>
      —
      Category: <a href="/blog/category/modern-opengl/" class="category">Modern OpenGL Series</a>
    </small>
    <div class="main-image">
      <img class="img-responsive" src="/images/posts/modern-opengl-02/main-image.png" />
      
    </div>
  </header>

  <div class="post-content"><p>In this article, we will be adding a texture to the triangle. This will involve adding new variables to the vertex and fragment shaders, creating and using texture objects, and learning a bit about texture units and texture coordinates.</p><p>This article introduces two new classes to the <code>tdogl</code> namespace: <code>tdogl::Bitmap</code> and <code>tdogl::Texture</code>. These will allow us to load an image from a jpg, png, or bmp file into video memory, for use in the shaders. Also, the <code>tdogl::Program</code> class has some new methods for setting shader variables.</p>
<!--more--><p></p><div class="modern-opengl-preamble">
  <h2>Accessing The Code</h2>

  <p>
    Download all the code as a zip from here:
    <a href="https://github.com/tomdalling/opengl-series/archive/master.zip">
      https://github.com/tomdalling/opengl-series/archive/master.zip
    </a>
  </p>

  <p>
    All the code in this series of articles is available from github:
    <a href="https://github.com/tomdalling/opengl-series">https://github.com/tomdalling/opengl-series</a>.
    You can download a zip of all the files from that page, or you can clone the
    repository if you are familiar with git.
  </p>

  <p class="builds-on-previous">
    This article builds on the code from the previous article.
  </p>

  <p>
    The code for this article can be found in the
    <a class="source_folder" href="https://github.com/tomdalling/opengl-series/tree/master/source/02_textures">
      <code>source/02_textures</code>
    </a>
    folder. On OS X, open the <code>opengl-series.xcodeproj</code> file in the
    root folder, and select the target that corresponds with this article. On
    Windows, open the <code>opengl-series.sln</code> file in Visual Studio 2013,
    and open the project that corresponds with this article.
  </p>

  <p>
    The project includes all of its dependencies, so you shouldn't have to
    install or configure anything extra. Please let me know if you have
    any issues compiling and running the code.
  </p>
</div><h2>Uniform vs Attribute Shader Variables</h2><p>All the variables in the previous article were <em>attribute</em> variables. In this article we will be introducing the other kind of variable: uniform variables.</p>
<blockquote class="pull-right">
  Attribute variables can have a different value for each vertex. Uniform
  variables keep the same value for multiple vertices.
</blockquote><p>There are two kinds of shader variables: <em>uniform</em> variables and <em>attribute</em> variables. Attribute variables can have a different value for each vertex. Uniform variables keep the same value for multiple vertices. For example, if you want to set a colour for a whole triangle, you would use a uniform variable. If you want each corner of a triangle to be a different color, you would use an attribute variable. I will just refer to them as "uniforms" and "attributes" from now on.</p>
<blockquote class="pull-right">
  Uniforms can be accessed from any shader, but attributes must enter the
  <em>vertex</em> shader first, not the <em>fragment</em> shader. The vertex
  shader can pass the value into the fragment shader if necessary.
</blockquote><p>Uniforms can be accessed from any shader, but attributes must enter the <em>vertex</em> shader first, not the <em>fragment</em> shader. The vertex shader can pass the value into the fragment shader if necessary. This is because uniforms are like constants – they don't change so they can be accessed from any shader. However, attributes are not constant. The vertex shader can change the value of an attribute before it gets to the fragment shader. The output of the vertex shader is the input to the fragment shader.</p><p>To set the value of a uniform, we use one of the <a href="http://www.opengl.org/sdk/docs/man/xhtml/glUniform.xml">glUniform*</a> functions. To set the value of an attribute, we store the values in a VBO and send them to the shader with a VAO and <a href="http://www.opengl.org/sdk/docs/man/xhtml/glVertexAttribPointer.xml">glVertexAttribPointer</a> like we saw in the previous article. It is also possible to set the value of an attribute using one of the <a href="http://www.opengl.org/sdk/docs/man/xhtml/glVertexAttrib.xml">glVertexAttrib*</a> functions, if you are not storing the values in a VBO.</p><h2>Textures</h2>
<blockquote class="pull-right">
  Textures are basically 2D images that you can apply to your 3D objects.
</blockquote><p>Textures are basically 2D images that you can apply to your 3D objects. They have other uses, but displaying a 2D image on 3D geometry is the most common use. There are 1D, 2D and 3D textures, but we will only be looking at 2D textures in this article. For a more in-depth look at textures, see the <a href="http://www.arcsynthesis.org/gltut/Texturing/Tutorial%2014.html">Textures are not Pictures</a> chapter of the <a href="http://www.arcsynthesis.org/gltut/">Learning Modern 3D Graphics Programming</a> book.</p><p>Textures live in video memory. That is, you upload the data for the texture to the graphics card before you can use it. This is similar to how we saw VBOs working in the previous article – VBOs are used to store data in video memory before that data gets used.</p>
<blockquote class="pull-right">
  The pixel width and height of a texture should be a power of two.
</blockquote><p>The pixel width and height of a texture should be a power of two, for example: 16, 32, 64, 128, 256, 512. In this article we will use the 256x256 image "hazard.png" as a texture, which is shown below.</p><p><figure>  <img src="/images/posts/modern-opengl-02/hazard.png" /> </figure></p><p>We will use the <code>tdogl::Bitmap</code> class to load the raw pixel data from "hazard.png" into memory, with the help of <a href="https://github.com/nothings/stb">stb_image</a>. Then we will use <code>tdogl::Texture</code> to upload the raw pixel data into an OpenGL texture object. Fortunately, texture creation in OpenGL has not really changed since it was first introduced, so there are plenty of good articles online that will show you how to create a texture. The way that texture coordinates are sent to the graphics card has changed, but the creation of the texture is the same.</p><p>Below is the constructor code for <code>tdogl::Texture</code>, which handles the creation of an OpenGL texture.</p>
<div class="highlight"><pre><span class="n">Texture</span><span class="o">::</span><span class="n">Texture</span><span class="p">(</span><span class="k">const</span> <span class="n">Bitmap</span><span class="o">&amp;</span> <span class="n">bitmap</span><span class="p">,</span> <span class="n">GLint</span> <span class="n">minMagFiler</span><span class="p">,</span> <span class="n">GLint</span> <span class="n">wrapMode</span><span class="p">)</span> <span class="o">:</span>
    <span class="n">_originalWidth</span><span class="p">((</span><span class="n">GLfloat</span><span class="p">)</span><span class="n">bitmap</span><span class="p">.</span><span class="n">width</span><span class="p">()),</span>
    <span class="n">_originalHeight</span><span class="p">((</span><span class="n">GLfloat</span><span class="p">)</span><span class="n">bitmap</span><span class="p">.</span><span class="n">height</span><span class="p">())</span>
<span class="p">{</span>
    <span class="n">glGenTextures</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_object</span><span class="p">);</span>
    <span class="n">glBindTexture</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="n">_object</span><span class="p">);</span>
    <span class="n">glTexParameteri</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="n">GL_TEXTURE_MIN_FILTER</span><span class="p">,</span> <span class="n">minMagFiler</span><span class="p">);</span>
    <span class="n">glTexParameteri</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="n">GL_TEXTURE_MAG_FILTER</span><span class="p">,</span> <span class="n">minMagFiler</span><span class="p">);</span>
    <span class="n">glTexParameteri</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="n">GL_TEXTURE_WRAP_S</span><span class="p">,</span> <span class="n">wrapMode</span><span class="p">);</span>
    <span class="n">glTexParameteri</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="n">GL_TEXTURE_WRAP_T</span><span class="p">,</span> <span class="n">wrapMode</span><span class="p">);</span>
    <span class="n">glTexImage2D</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span>
                 <span class="mi">0</span><span class="p">,</span> 
                 <span class="n">TextureFormatForBitmapFormat</span><span class="p">(</span><span class="n">bitmap</span><span class="p">.</span><span class="n">format</span><span class="p">()),</span>
                 <span class="p">(</span><span class="n">GLsizei</span><span class="p">)</span><span class="n">bitmap</span><span class="p">.</span><span class="n">width</span><span class="p">(),</span> 
                 <span class="p">(</span><span class="n">GLsizei</span><span class="p">)</span><span class="n">bitmap</span><span class="p">.</span><span class="n">height</span><span class="p">(),</span>
                 <span class="mi">0</span><span class="p">,</span> 
                 <span class="n">TextureFormatForBitmapFormat</span><span class="p">(</span><span class="n">bitmap</span><span class="p">.</span><span class="n">format</span><span class="p">()),</span> 
                 <span class="n">GL_UNSIGNED_BYTE</span><span class="p">,</span> 
                 <span class="n">bitmap</span><span class="p">.</span><span class="n">pixelBuffer</span><span class="p">());</span>
    <span class="n">glBindTexture</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">}</span>
</pre></div><h2>Texture Coordinates</h2>
<blockquote class="pull-right">
  The strange thing about texture coordinates is that they are not in pixels.
  They range from zero to one, where (0,0) is the bottom left and (1,1) is the
  top right.
</blockquote><p>Texture coordinates are, unsurprisingly, coordinates on a texture. The strange thing about texture coordinates is that they are not in pixels. They range from zero to one, where (0,0) is the bottom left and (1,1) is the top right. If you load the image into OpenGL upside down, then (0,0) will be the top left, not the bottom left. To turn pixel coordinates into texture coordinates, you must divide by the width and height of the texture. For example, in a 256x256 image, the pixel coordinates (128, 256) become (0.5, 1) in texture coordinates.</p><p><figure>  <img src="/images/posts/modern-opengl-02/uv_coords.png" /> </figure></p><p>Texture coordinates are commonly referred to as UV coordinates. You could call them XY coordinates, but XYZ is commonly used to represent a vertex, and we don't want to confuse texture coordinates with vertex coordinates.</p><h2>Texture Image Units</h2>
<blockquote class="pull-right">
  You can't just send a texture straight to a shader. First you bind the
  texture to a texture unit, then you send the <em>index of the texture
  unit</em> to the shader.
</blockquote><p>Texture image units, or just "texture units" for short, are a slightly weird part of OpenGL. You can't just send a texture straight to a shader. First you bind the texture to a texture unit, then you send the <em>index of the texture unit</em> to the shader.</p><p>There are a limited number of texture units. On less-powerful devices such as phones, there might only be two texture units. In that case, even though we could have dozens of textures, we could only use two of them at the same time in the shaders. We will only be using one texture in this article, so we only need one texture unit, but it is possible to blend multiple different textures together inside the fragment shader.</p><h2>Implementing Textures</h2><p>First, let's make a new global for the texture.</p>
<div class="highlight"><pre><span class="n">tdogl</span><span class="o">::</span><span class="n">Texture</span><span class="o">*</span> <span class="n">gTexture</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
</pre></div><p>We'll make a new function to load "hazard.png" into the global. This gets called from the <code>AppMain</code> function.</p>
<div class="highlight"><pre><span class="k">static</span> <span class="kt">void</span> <span class="nf">LoadTexture</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">tdogl</span><span class="o">::</span><span class="n">Bitmap</span> <span class="n">bmp</span> <span class="o">=</span> <span class="n">tdogl</span><span class="o">::</span><span class="n">Bitmap</span><span class="o">::</span><span class="n">bitmapFromFile</span><span class="p">(</span><span class="n">ResourcePath</span><span class="p">(</span><span class="s">"hazard.png"</span><span class="p">));</span>
    <span class="n">bmp</span><span class="p">.</span><span class="n">flipVertically</span><span class="p">();</span>
    <span class="n">gTexture</span> <span class="o">=</span> <span class="k">new</span> <span class="n">tdogl</span><span class="o">::</span><span class="n">Texture</span><span class="p">(</span><span class="n">bmp</span><span class="p">);</span>
<span class="p">}</span>
</pre></div><p>Next we will give each vertex of the triangle a texture coordinate. If you compare the UV coords to the image above, you will see that the coordinates represent (middle,top), (left,bottom), and (right,bottom) in that order.</p>
<div class="highlight"><pre><span class="n">GLfloat</span> <span class="n">vertexData</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">//  X     Y     Z       U     V</span>
     <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.8f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span>   <span class="mf">0.5f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span>
    <span class="o">-</span><span class="mf">0.8f</span><span class="p">,</span><span class="o">-</span><span class="mf">0.8f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span>   <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span>
     <span class="mf">0.8f</span><span class="p">,</span><span class="o">-</span><span class="mf">0.8f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span>   <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span>
<span class="p">};</span>
</pre></div><p>Now we need to modify the fragment shader so that it takes a texture and a texture coordinate as input. The new fragment shader looks like this:</p>
<div class="highlight"><pre><span class="cp">#version 150</span>
<span class="n">uniform</span> <span class="n">sampler2D</span> <span class="n">tex</span><span class="p">;</span> <span class="c1">//this is the texture</span>
<span class="n">in</span> <span class="n">vec2</span> <span class="n">fragTexCoord</span><span class="p">;</span> <span class="c1">//this is the texture coord</span>
<span class="n">out</span> <span class="n">vec4</span> <span class="n">finalColor</span><span class="p">;</span> <span class="c1">//this is the output color of the pixel</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">finalColor</span> <span class="o">=</span> <span class="n">texture</span><span class="p">(</span><span class="n">tex</span><span class="p">,</span> <span class="n">fragTexCoord</span><span class="p">);</span>
<span class="p">}</span>
</pre></div><p>The <code>uniform</code> keyword indications that <code>tex</code> is a <em>uniform</em> variable. The texture is a uniform because all the vertices of the triangle will have the same texture. <code>sampler2D</code> is the variable type, indicating that it holds a 2D texture.</p><p>The <code>fragTexCoord</code> is an <em>attribute</em> variable, because each vertex of the triangle will have a different texture coordinate.</p><p>The <code>texture</code> function finds the color of the pixel at the given texture coordinate. In older versions of GLSL, you would use the <code>texture2D</code> function to do this.</p><p>We can't pass an attribute straight into the fragment shader, because attributes must first go through the vertex shader. Here is the modified vertex shader:</p>
<div class="highlight"><pre><span class="cp">#version 150</span>
<span class="n">in</span> <span class="n">vec3</span> <span class="n">vert</span><span class="p">;</span>
<span class="n">in</span> <span class="n">vec2</span> <span class="n">vertTexCoord</span><span class="p">;</span>
<span class="n">out</span> <span class="n">vec2</span> <span class="n">fragTexCoord</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Pass the tex coord straight through to the fragment shader</span>
    <span class="n">fragTexCoord</span> <span class="o">=</span> <span class="n">vertTexCoord</span><span class="p">;</span>
    
    <span class="n">gl_Position</span> <span class="o">=</span> <span class="n">vec4</span><span class="p">(</span><span class="n">vert</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</pre></div><p>This vertex shader takes <code>vertTexCoord</code> as input, and passes it straight into the <code>fragTexCoord</code> attribute of the fragment shader without modifying it.</p><p>The shaders now have two variables we need to set: the <code>vertTexCoord</code> attribute and <code>tex</code> uniform. Let's start by setting the <code>tex</code> variable. Open up main.cpp and find the <code>Render()</code> function. We will set the <code>tex</code> uniform just before we draw the triangle:</p>
<div class="highlight"><pre><span class="n">glActiveTexture</span><span class="p">(</span><span class="n">GL_TEXTURE0</span><span class="p">);</span>
<span class="n">glBindTexture</span><span class="p">(</span><span class="n">GL_TEXTURE_2D</span><span class="p">,</span> <span class="n">gTexture</span><span class="o">-&gt;</span><span class="n">object</span><span class="p">());</span>
<span class="n">gProgram</span><span class="o">-&gt;</span><span class="n">setUniform</span><span class="p">(</span><span class="s">"tex"</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">//set to 0 because the texture is bound to GL_TEXTURE0</span>
</pre></div><p>The texture can't be used until it is bound to a texture unit. <code>glActiveTexture</code> tells OpenGL which texture unit we want to use. <code>GL_TEXTURE0</code> is the first texture unit, so we will just use that.</p><p>Next, we use <code>glBindTexture</code> bind our texture into the active texture unit.</p><p>Then we set the <code>tex</code> uniform of the shaders to the <em>index of the texture unit</em>. We used texture unit zero, so we set the <code>tex</code> uniform to the integer value <code>0</code>. The <code>setUniform</code> method just calls the <code>glUniform1i</code> function.</p><p>The final step is to get the texture coordinates into the <code>vertTexCoord</code> attribute. To do this, we will modify the VAO inside the <code>LoadTriangle()</code> function. This is what the code used to look like:</p>
<div class="highlight"><pre><span class="c1">// Put the three triangle vertices into the VBO</span>
<span class="n">GLfloat</span> <span class="n">vertexData</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">//  X     Y     Z</span>
     <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.8f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span>
    <span class="o">-</span><span class="mf">0.8f</span><span class="p">,</span><span class="o">-</span><span class="mf">0.8f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span>
     <span class="mf">0.8f</span><span class="p">,</span><span class="o">-</span><span class="mf">0.8f</span><span class="p">,</span> <span class="mf">0.0f</span>
<span class="p">};</span>

<span class="c1">// connect the xyz to the "vert" attribute of the vertex shader</span>
<span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="n">gProgram</span><span class="o">-&gt;</span><span class="n">attrib</span><span class="p">(</span><span class="s">"vert"</span><span class="p">));</span>
<span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="n">gProgram</span><span class="o">-&gt;</span><span class="n">attrib</span><span class="p">(</span><span class="s">"vert"</span><span class="p">),</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="n">GL_FALSE</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
</pre></div><p>And this is what we need to change it to:</p>
<div class="highlight"><pre><span class="c1">// Put the three triangle vertices (XYZ) and texture coordinates (UV) into the VBO</span>
<span class="n">GLfloat</span> <span class="n">vertexData</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">//  X     Y     Z       U     V</span>
     <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.8f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span>   <span class="mf">0.5f</span><span class="p">,</span> <span class="mf">1.0f</span><span class="p">,</span>
    <span class="o">-</span><span class="mf">0.8f</span><span class="p">,</span><span class="o">-</span><span class="mf">0.8f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span>   <span class="mf">0.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span>
     <span class="mf">0.8f</span><span class="p">,</span><span class="o">-</span><span class="mf">0.8f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span>   <span class="mf">1.0f</span><span class="p">,</span> <span class="mf">0.0f</span><span class="p">,</span>
<span class="p">};</span>

<span class="c1">// connect the xyz to the "vert" attribute of the vertex shader</span>
<span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="n">gProgram</span><span class="o">-&gt;</span><span class="n">attrib</span><span class="p">(</span><span class="s">"vert"</span><span class="p">));</span>
<span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="n">gProgram</span><span class="o">-&gt;</span><span class="n">attrib</span><span class="p">(</span><span class="s">"vert"</span><span class="p">),</span> <span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="n">GL_FALSE</span><span class="p">,</span> <span class="mi">5</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="n">GLfloat</span><span class="p">),</span> <span class="nb">NULL</span><span class="p">);</span>
    
<span class="c1">// connect the uv coords to the "vertTexCoord" attribute of the vertex shader</span>
<span class="n">glEnableVertexAttribArray</span><span class="p">(</span><span class="n">gProgram</span><span class="o">-&gt;</span><span class="n">attrib</span><span class="p">(</span><span class="s">"vertTexCoord"</span><span class="p">));</span>
<span class="n">glVertexAttribPointer</span><span class="p">(</span><span class="n">gProgram</span><span class="o">-&gt;</span><span class="n">attrib</span><span class="p">(</span><span class="s">"vertTexCoord"</span><span class="p">),</span> <span class="mi">2</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="n">GL_TRUE</span><span class="p">,</span>  <span class="mi">5</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="n">GLfloat</span><span class="p">),</span> <span class="p">(</span><span class="k">const</span> <span class="n">GLvoid</span><span class="o">*</span><span class="p">)(</span><span class="mi">3</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">GLfloat</span><span class="p">)));</span>
</pre></div><p>We've added a second call to <code>glVertexAttribPointer</code>, but we've also modified the first call as well. The most important arguments to look at are the last two. </p><p>The second last argument to both <code>glVertexAttribPointer</code> calls is <code>5*sizeof(GLfloat)</code>. This is the "stride" argument. This argument wants to know how many bytes are between the start of one value, and the start of the next value. In both cases, each value is five <code>GLfloat</code>s away from the next value. For example, if we start at the "X" value and count forward five values, we will be at the next "X" value. The same is true if we start at a "U" value, and count forward five. This argument is in <em>bytes</em>, not floats, so we must multiply the number of floats by the number of bytes per float.</p><p>The last argument to <code>glVertexAttribPointer</code> is the "offset" argument. This argument wants to know how many bytes from the start is the first value. The first <strong>XYZ</strong> value is right at the beginning, so the offset is set to NULL which means "zero bytes from the start". The first <strong>UV</strong> value is not at the beginning – it is three floats away from the beginning. Once again, this argument is in <em>bytes</em>, not floats, so we must multiply the number of floats by the number of bytes per float. We must cast the number of bytes to a <code>const
GLvoid*</code>, because in older versions of OpenGL this argument used to be something different to the "offset" that it is now.</p><p>Now, when you run the program, you should see a textured triangle like the one shown at the top of this article.</p><h2>Future Article Sneak Peek</h2><p>In the next article we will learn a bit about matrix math, and use matrices to spin a cube, move the camera, and add a perspective projection. We will also learn about depth buffering, and how a typical program does time-based updates such as animation.</p><h2>Additional OpenGL Texture Resources</h2>
<ul>
  <li><a href="http://www.opengl.org/wiki/Texture">The texture page on the OpenGL wiki</a></li>
  <li><a href="http://www.arcsynthesis.org/gltut/Texturing/Texturing.html">The texturing chapters</a> of the Learning Modern 3D Graphics Programming book.</li>
  <li><a href="http://ogldev.atspace.co.uk/www/tutorial16/tutorial16.html">Tutorial 16 - Basic Texture Mapping</a> by Etay Meiri</li>
  <li><a href="https://github.com/progschj/OpenGL-Examples/blob/master/03texture.cpp">The texturing example code</a> by Jakob Progsch</li>
</ul><h2>Translations Of This Article</h2>
<ul>
  <li><a href="http://science.webhostinggeeks.com/Moderne-OpenGL02%E2%80%93Teksture">Serbo-Croatian</a></li>
</ul></div>

  <footer>
    <div class="alert alert-info subscribe-bait">
      <p><strong>Enjoy this post?</strong></p>
      <a class="btn btn-success" href="/feed/">
        Subscribe via RSS
      </a>
      <a data-size="large" data-show-count="false" class="twitter-follow-button" href="https://twitter.com/tom_dalling">Follow @tom_dalling</a>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
    </div>

<div class="row programming-for-beginners-book">
  <div class="col-md-12">
    <div class="panel panel-default">
      <div class="panel-body">
        <div class="col-md-6">
          <a href="https://leanpub.com/programming-for-beginners">
            <img class="img-responsive" src="/images/programming-for-beginners-cover.png" />
          </a>
        </div>
        <div class="col-md-6">
          <span class="h1">
            Programming for Beginners
            <small>Learn to Code by Making Little Games</small>
          </span>
          <p>Take your first step into the world of computer programming. This
          book assumes that you don't know anything about writing code, and
          teaches you the fundamental concepts that programmers use every day.
          You will need some basic computer skills – like downloading, opening,
          and saving files – but everything else will be explained here, step
          by step, starting from the very beginning.</p>
          <a class="btn btn-lg btn-primary" href="https://leanpub.com/programming-for-beginners">
            View on Leanpub
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

    <h2>Comments</h2>
    <div id="disqus_thread"></div>
    <script id="disqus_script" type="text/javascript">
      var disqus_shortname = "tomdalling";
      var disqus_identifier = "821 http:\/\/tomdalling.com\/?p=821";
      var disqus_title = "Modern OpenGL 02 - Textures";
      var disqus_url = "http:\/\/www.tomdalling.com\/blog\/modern-opengl\/02-textures\/";

      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments.</a></noscript>
  </footer>

</article></main>

        <div class="col-md-4 sidebar">

          <div class="panel panel-default">
            <div class="panel-heading">Subscribe</div>
            <ul class="list-group">
              <li class="list-group-item">
                <a href="/blog/feed/">
                  <i class="fa fa-rss"></i> RSS
                </a>
              </li>
              <li class="list-group-item">
                <a href="https://twitter.com/tom_dalling">
                  <i class="fa fa-twitter"></i> Twitter
                </a>
              </li>
            </ul>
          </div>

          <div class="panel panel-default">
            <div class="panel-heading">Recent Posts</div>
            <ul class="list-group recent-posts">
              <li class="list-group-item">
                <a href="/blog/software-design/fizzbuzz-in-too-much-detail/">FizzBuzz In Too Much Detail</a>
              </li><li class="list-group-item">
                <a href="/blog/ruby/fruity-bat-flappy-bird-clone-in-ruby/">Making Fruity Bat (a Flappy Bird clone) in Ruby</a>
              </li><li class="list-group-item">
                <a href="/blog/modern-opengl/08-even-more-lighting-directional-lights-spotlights-multiple-lights/">Modern OpenGL 08 – Even More Lighting: Directional Lights, Spotlights, &amp; Multiple Lights</a>
              </li><li class="list-group-item">
                <a href="/blog/modern-opengl/opengl-in-2014/">OpenGL in 2014</a>
              </li><li class="list-group-item">
                <a href="/blog/modern-opengl/explaining-homogenous-coordinates-and-projective-geometry/">Explaining Homogeneous Coordinates &amp; Projective Geometry</a>
              </li>
            </ul>
          </div>

          <div class="panel panel-default">
            <div class="panel-heading">Blog Categories</div>
            <ul class="list-group categories">
              <li class="list-group-item">
                <a class="category" href="/blog/category/cocoa/">Cocoa</a>
                (<span class="post-count">5</span>
                <a href="/blog/category/cocoa/feed/" class="feed"><i class="fa fa-rss"></i></a>)
              </li><li class="list-group-item">
                <a class="category" href="/blog/category/coding-styleconventions/">Coding Style/Conventions</a>
                (<span class="post-count">3</span>
                <a href="/blog/category/coding-styleconventions/feed/" class="feed"><i class="fa fa-rss"></i></a>)
              </li><li class="list-group-item">
                <a class="category" href="/blog/category/coding-tips/">Coding Tips</a>
                (<span class="post-count">4</span>
                <a href="/blog/category/coding-tips/feed/" class="feed"><i class="fa fa-rss"></i></a>)
              </li><li class="list-group-item">
                <a class="category" href="/blog/category/random-stuff/">Miscellaneous</a>
                (<span class="post-count">1</span>
                <a href="/blog/category/random-stuff/feed/" class="feed"><i class="fa fa-rss"></i></a>)
              </li><li class="list-group-item">
                <a class="category" href="/blog/category/modern-opengl/">Modern OpenGL Series</a>
                (<span class="post-count">10</span>
                <a href="/blog/category/modern-opengl/feed/" class="feed"><i class="fa fa-rss"></i></a>)
              </li><li class="list-group-item">
                <a class="category" href="/blog/category/ruby/">Ruby</a>
                (<span class="post-count">1</span>
                <a href="/blog/category/ruby/feed/" class="feed"><i class="fa fa-rss"></i></a>)
              </li><li class="list-group-item">
                <a class="category" href="/blog/category/software-design/">Software Design</a>
                (<span class="post-count">9</span>
                <a href="/blog/category/software-design/feed/" class="feed"><i class="fa fa-rss"></i></a>)
              </li><li class="list-group-item">
                <a class="category" href="/blog/category/software-processes/">Software Processes</a>
                (<span class="post-count">1</span>
                <a href="/blog/category/software-processes/feed/" class="feed"><i class="fa fa-rss"></i></a>)
              </li><li class="list-group-item">
                <a class="category" href="/blog/category/web/">Web</a>
                (<span class="post-count">1</span>
                <a href="/blog/category/web/feed/" class="feed"><i class="fa fa-rss"></i></a>)
              </li>
            </ul>
          </div>

          <div class="panel panel-default">
            <div class="panel-heading">Blog Archives</div>
            <ul class="list-group archives">
              <li class="list-group-item">
                <a class="month" href="/blog/2015/04/">April 2015</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2015/02/">February 2015</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2014/11/">November 2014</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2014/09/">September 2014</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2014/02/">February 2014</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2013/04/">April 2013</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2013/03/">March 2013</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2013/02/">February 2013</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2013/01/">January 2013</a>
                (<span class="post-count">2</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2012/12/">December 2012</a>
                (<span class="post-count">2</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2012/11/">November 2012</a>
                (<span class="post-count">2</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2012/07/">July 2012</a>
                (<span class="post-count">2</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2012/05/">May 2012</a>
                (<span class="post-count">2</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2012/03/">March 2012</a>
                (<span class="post-count">2</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2011/12/">December 2011</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2010/12/">December 2010</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2010/11/">November 2010</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2010/05/">May 2010</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2010/04/">April 2010</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2010/02/">February 2010</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2009/12/">December 2009</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2009/11/">November 2009</a>
                (<span class="post-count">3</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2009/10/">October 2009</a>
                (<span class="post-count">2</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2009/07/">July 2009</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2009/06/">June 2009</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2009/05/">May 2009</a>
                (<span class="post-count">1</span>)
              </li>
            </ul>
          </div>

        </div>
      </div>

      <footer class="page-footer">
        <p>© 2009 – <span class="current-year">2015</span> Tom Dalling</p>

        <p class="social">
          <a href="https://twitter.com/tom_dalling">
            <i class="fa fa-lg fa-twitter"></i>
          </a>
          <a href="https://github.com/tomdalling">
            <i class="fa fa-lg fa-github"></i>
          </a>
          <a href="https://stackoverflow.com/users/108105/tom-dalling">
            <i class="fa fa-lg fa-stack-overflow"></i>
          </a>
          <a href="mailto:tom at tomdalling com">
            <i class="fa fa-lg fa-envelope"></i>
          </a>
        </p>
      </footer>

      <script src="/bundles/all.js"></script>
      <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [['$$','$$']],
            displayMath: [['[blockmath]', '[/blockmath]']]
          }
        });
      </script>
      <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </div></body>

</html>
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta content="IE=edge" http-equiv="X-UA-Compatible" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <title>Category: Cocoa — Tom Dalling</title>
    <link href="/style.css" rel="stylesheet" />
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" />
    <link type="text/css" rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro" />
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  <link rel="canonical" href="/blog/category/cocoa/" /></head>

  <body>

    <div class="container">

      <div class="row">
        <div class="col-md-12">
          <nav role="navigation" class="navbar navbar-default">
            <div class="container-fluid">
              <div class="navbar-header">
                <button data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" class="navbar-toggle" type="button">
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </button>
                <a href="/" class="navbar-brand">Tom Dalling</a>
              </div>

              <div id="bs-example-navbar-collapse-1" class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                  <li><a href="/">Home</a></li>
                  <li><a href="/blog/">Blog</a></li>
                </ul>
              </div>
            </div>
          </nav>
        </div>
      </div>

      <div class="row">

        <main class="col-md-8"><div class="post-list">
  <h1>
    <span class="title">Category: Cocoa</span>
    <a title="RSS feed" class="rss" href="/blog/feed/">
      <i class="fa fa-rss"></i>
    </a>
  </h1>

  <article class="post post-listed">
    <header>
      <h2><a href="/blog/cocoa/an-in-depth-look-at-manual-memory-management-in-objective-c/">An In-depth Look At Manual Memory Management In Objective-C</a></h2>
      <small class="meta">
        <span class="post-date">26 May, 2012</span>
        —
        Category: <a href="/blog/category/cocoa/" class="category">Cocoa</a>
      </small>
    </header>

    <img src="" class="listed-main-image" />

    <div class="post-content"><p>It feels like fleets of new developers dash themselves upon the rocky shores of Objective-C memory management every day on StackOverflow. I can't bear to write the same answers over and over again, so this article will be my final, unabridged explanation of: <code>retain</code>, <code>release</code>, <code>autorelease</code>, <code>alloc</code>, <code>dealloc</code>, <code>copy</code>, and <code>NSAutoreleasePool</code>. There will be some rules to memorize, but we will also take a journey under the hood for a deeper understanding.</p><p>This article is intended for people who are new to Objective-C, or who never fully learnt how manual reference counting works. It does assume that you have some programming experience, possibly in another language. If you are a beginner programmer and Objective-C is your first language, I will try to keep the explanations clear, but it may become confusing the more in-depth we get.</p><p>We will be covering:</p>
<ul>
  <li>A Quick Mention Of ARC And Garbage Collection</li>
  <li>Coming From C/C++</li>
  <li>Coming From a Garbage Collected Language (Java, Python, C#, etc.)</li>
  <li>What Is Reference Counting?</li>
  <li>How Does Reference Counting Work In Objective-C?</li>
  <li><code>NSAutoreleasePool</code> And <code>autorelease</code></li>
  <li>Common Mistakes</li>
</ul><p>If something is not explained, or not explained very well, post a question in the comments and I'll expand the article to cover it.</p>
</div>

    <footer>
      <a href="/blog/cocoa/an-in-depth-look-at-manual-memory-management-in-objective-c/" class="btn btn-default more">
        Read full post <i class="fa fa-angle-double-right"></i>
      </a>
    </footer>
  </article><article class="post post-listed">
    <header>
      <h2><a href="/blog/cocoa/gotchas-with-grand-central-dispatch-libdispatch-and-blocks/">Gotchas With Grand Central Dispatch (libdispatch) And Blocks</a></h2>
      <small class="meta">
        <span class="post-date">02 Mar, 2012</span>
        —
        Category: <a href="/blog/category/cocoa/" class="category">Cocoa</a>
      </small>
    </header>

    <img src="" class="listed-main-image" />

    <div class="post-content"><p><a href="http://en.wikipedia.org/wiki/Grand_Central_Dispatch" title="Grand Central Dispatch">GCD</a> is a nice replacement for the old <code><a href="https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/performSelectorInBackground:withObject:">performSelectorInBackground:withObject:</a></code> and <code><a href="https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/performSelectorOnMainThread:withObject:waitUntilDone:">performSelectorOnMainThread:withObject:waitUntilDone:</a></code> methods and <a href="https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html">NSOperation</a>. It's also a nice supplement to <a href="https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsthread_Class/Reference/Reference.html">NSThread</a>. </p><p>However, I think it was over-hyped a little bit by Apple when it was first released. You probably have all these random deadlocks and race conditions and stuff whenever you use multiple threads, but GCD is <em>soooooo good</em> that you don't have to worry about that anymore. Just use these magic blocks.</p><p>The problem is that concurrent programming is notoriously hard to get right. Maybe GCD helps to make it easier, but It doesn't solve all of your problems. In fact, GCD and blocks introduce some problems of their own. This article will focus on some of those problems.</p>
</div>

    <footer>
      <a href="/blog/cocoa/gotchas-with-grand-central-dispatch-libdispatch-and-blocks/" class="btn btn-default more">
        Read full post <i class="fa fa-angle-double-right"></i>
      </a>
    </footer>
  </article><article class="post post-listed">
    <header>
      <h2><a href="/blog/cocoa/how-cocoa-bindings-work-via-kvc-and-kvo/">How Cocoa Bindings Work (via KVC and KVO)</a></h2>
      <small class="meta">
        <span class="post-date">05 Nov, 2010</span>
        —
        Category: <a href="/blog/category/cocoa/" class="category">Cocoa</a>
      </small>
    </header>

    <img src="" class="listed-main-image" />

    <div class="post-content"><p>Cocoa bindings can be a little confusing, especially to newcomers. Once you have an understanding of the underlying concepts, bindings aren't too hard. In this article, I'm going to explain the concepts behind bindings from the ground up; first explaining Key-Value Coding (KVC), then Key-Value Observing (KVO), and finally explaining how Cocoa bindings are built on top of KVC and KVO.</p>
</div>

    <footer>
      <a href="/blog/cocoa/how-cocoa-bindings-work-via-kvc-and-kvo/" class="btn btn-default more">
        Read full post <i class="fa fa-angle-double-right"></i>
      </a>
    </footer>
  </article><article class="post post-listed">
    <header>
      <h2><a href="/blog/cocoa/why-performselector-is-more-dangerous-than-i-thought/">Why performSelector: Is More Dangerous Than I Thought</a></h2>
      <small class="meta">
        <span class="post-date">14 May, 2010</span>
        —
        Category: <a href="/blog/category/cocoa/" class="category">Cocoa</a>
      </small>
    </header>

    <img src="" class="listed-main-image" />

    <div class="post-content"><p>I fixed a rather nasty bug today in <a href="http://github.com/tomdalling/AspectObjectiveC">AspectObjectiveC</a>. One particular unit test would crash with <code>EXC_BAD_ACCESS</code> every time. After learning far more about registers and ABIs than I ever wanted to know (thanks, <a href="http://www.sealiesoftware.com/blog/archive/2008/10/30/objc_explain_objc_msgSend_stret.html" title="[objc explain]: objc_msgSend_stret">Greg Parker</a>), it dawned on me that <code>performSelector:</code> <strong>was corrupting memory</strong>. It was particularly hard to track down because the crash would happen a couple of lines <em>after</em> the call to <code>performSelector:</code>, when the corrupted memory was actually accessed.</p><p>I've never had a problem with <code>performSelector:</code> before, but this time I was using it a little differently. The return value of the selector was an <code>NSRect</code>. </p><p>Now for the gory explanation.</p>
</div>

    <footer>
      <a href="/blog/cocoa/why-performselector-is-more-dangerous-than-i-thought/" class="btn btn-default more">
        Read full post <i class="fa fa-angle-double-right"></i>
      </a>
    </footer>
  </article><article class="post post-listed">
    <header>
      <h2><a href="/blog/cocoa/implementing-your-own-cocoa-bindings/">Implementing Your Own Cocoa Bindings</a></h2>
      <small class="meta">
        <span class="post-date">31 Jul, 2009</span>
        —
        Category: <a href="/blog/category/cocoa/" class="category">Cocoa</a>
      </small>
    </header>

    <img src="" class="listed-main-image" />

    <div class="post-content"><p>This post is the result of investigation into a <a href="http://stackoverflow.com/questions/1169097/can-you-manually-implement-cocoa-bindings" title="Can you manually implement Cocoa bindings?">stackoverflow.com question of mine</a>.</p><p>So, you've created a spiffy <code>NSView</code> of your own, and have decided to make it compatible with bindings. Great! So you go and read the <a href="http://developer.apple.com/documentation/Cocoa/Conceptual/CocoaBindings/Concepts/HowDoBindingsWork.html" title="How Do Bindings Work?">documentation</a>, and you look at mmalc's GraphicsBindings examples. You override <code>bind:toObject:withKeyPath:options:</code> and everything works. But wait! Why isn't the <code>NSWindowController</code> ever being deallocated anymore?</p><p>Now you've got a nasty retain cycle on your hands. You do a little research and discover that not only do <a href="http://www.cocoabuilder.com/archive/message/cocoa/2004/6/12/109600" title="Retain cycle problem with bindings &amp; NSWindowController">other people have the same problem</a>, but even <a href="http://theocacao.com/document.page/18" title="Bindings and File's Owner">Apple's bindings used to have it</a> a few years ago. How did Apple fix the problem? With the magic, undocumented class <code>NSAutounbinder</code>, which <a href="http://www.google.com/search?q=nsautounbinder">nobody seems to know much about</a>.</p><p>Other people will tell you that you don't need to override <code>bind:toObject:withKeyPath:options:</code> and that bindings work automatically. This is only a half truth. <code>NSObject</code> does provide an implementation of <code>bind:toObject:withKeyPath:options:</code>, but it only half works. Using the default <code>NSObject</code> implementation, changes in the model will update the view, but the reverse is not true. When the bound property of the view changes, nothing happens to the model.</p><p>So, what is a Cocoa developer to do? I'll explain how to implement your own bindings that work exactly like Apple's, with no retain cycles. <del>I haven't found this solution anywhere else, so as far as I know, I'm the discoverer. I feel so special.</del> It has been <a href="http://www.cocoabuilder.com/archive/message/cocoa/2008/6/30/211682" title="Why aren't my bindings firing?">mentioned before</a> at least once. The solution is hard to find, though.</p>
</div>

    <footer>
      <a href="/blog/cocoa/implementing-your-own-cocoa-bindings/" class="btn btn-default more">
        Read full post <i class="fa fa-angle-double-right"></i>
      </a>
    </footer>
  </article>
</div></main>

        <div class="col-md-4 sidebar">

          <div class="panel panel-default">
            <div class="panel-heading">Subscribe</div>
            <ul class="list-group">
              <li class="list-group-item">
                <a href="/blog/feed/">
                  <i class="fa fa-rss"></i> RSS
                </a>
              </li>
              <li class="list-group-item">
                <a href="https://twitter.com/tom_dalling">
                  <i class="fa fa-twitter"></i> Twitter
                </a>
              </li>
            </ul>
          </div>

          <div class="panel panel-default">
            <div class="panel-heading">Recent Posts</div>
            <ul class="list-group recent-posts">
              <li class="list-group-item">
                <a href="/blog/modern-opengl/opengl-in-2014/">OpenGL in 2014</a>
              </li><li class="list-group-item">
                <a href="/blog/modern-opengl/explaining-homogenous-coordinates-and-projective-geometry/">Explaining Homogeneous Coordinates &amp; Projective Geometry</a>
              </li><li class="list-group-item">
                <a href="/blog/modern-opengl/07-more-lighting-ambient-specular-attenuation-gamma/">Modern OpenGL 07 – More Lighting: Ambient, Specular, Attenuation, Gamma</a>
              </li><li class="list-group-item">
                <a href="/blog/modern-opengl/06-diffuse-point-lighting/">Modern OpenGL 06 – Diffuse Point Lighting</a>
              </li><li class="list-group-item">
                <a href="/blog/modern-opengl/05-model-assets-and-instances/">Modern OpenGL 05 – Model Assets &amp; Instances</a>
              </li>
            </ul>
          </div>

          <div class="panel panel-default">
            <div class="panel-heading">Blog Categories</div>
            <ul class="list-group categories">
              <li class="list-group-item">
                <a class="category" href="/blog/category/cocoa/">Cocoa</a>
                (<span class="post-count">5</span>
                <a href="/blog/category/cocoa/feed/" class="feed"><i class="fa fa-rss"></i></a>)
              </li><li class="list-group-item">
                <a class="category" href="/blog/category/coding-styleconventions/">Coding Style/Conventions</a>
                (<span class="post-count">3</span>
                <a href="/blog/category/coding-styleconventions/feed/" class="feed"><i class="fa fa-rss"></i></a>)
              </li><li class="list-group-item">
                <a class="category" href="/blog/category/coding-tips/">Coding Tips</a>
                (<span class="post-count">4</span>
                <a href="/blog/category/coding-tips/feed/" class="feed"><i class="fa fa-rss"></i></a>)
              </li><li class="list-group-item">
                <a class="category" href="/blog/category/random-stuff/">Miscellaneous</a>
                (<span class="post-count">1</span>
                <a href="/blog/category/random-stuff/feed/" class="feed"><i class="fa fa-rss"></i></a>)
              </li><li class="list-group-item">
                <a class="category" href="/blog/category/modern-opengl/">Modern OpenGL Series</a>
                (<span class="post-count">9</span>
                <a href="/blog/category/modern-opengl/feed/" class="feed"><i class="fa fa-rss"></i></a>)
              </li><li class="list-group-item">
                <a class="category" href="/blog/category/software-design/">Software Design</a>
                (<span class="post-count">8</span>
                <a href="/blog/category/software-design/feed/" class="feed"><i class="fa fa-rss"></i></a>)
              </li><li class="list-group-item">
                <a class="category" href="/blog/category/software-processes/">Software Processes</a>
                (<span class="post-count">1</span>
                <a href="/blog/category/software-processes/feed/" class="feed"><i class="fa fa-rss"></i></a>)
              </li><li class="list-group-item">
                <a class="category" href="/blog/category/web/">Web</a>
                (<span class="post-count">1</span>
                <a href="/blog/category/web/feed/" class="feed"><i class="fa fa-rss"></i></a>)
              </li>
            </ul>
          </div>

          <div class="panel panel-default">
            <div class="panel-heading">Blog Archives</div>
            <ul class="list-group archives">
              <li class="list-group-item">
                <a class="month" href="/blog/2014/09/">September 2014</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2014/02/">February 2014</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2013/04/">April 2013</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2013/03/">March 2013</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2013/02/">February 2013</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2013/01/">January 2013</a>
                (<span class="post-count">2</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2012/12/">December 2012</a>
                (<span class="post-count">2</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2012/11/">November 2012</a>
                (<span class="post-count">2</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2012/07/">July 2012</a>
                (<span class="post-count">2</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2012/05/">May 2012</a>
                (<span class="post-count">2</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2012/03/">March 2012</a>
                (<span class="post-count">2</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2011/12/">December 2011</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2010/12/">December 2010</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2010/11/">November 2010</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2010/05/">May 2010</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2010/04/">April 2010</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2010/02/">February 2010</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2009/12/">December 2009</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2009/11/">November 2009</a>
                (<span class="post-count">3</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2009/10/">October 2009</a>
                (<span class="post-count">2</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2009/07/">July 2009</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2009/06/">June 2009</a>
                (<span class="post-count">1</span>)
              </li><li class="list-group-item">
                <a class="month" href="/blog/2009/05/">May 2009</a>
                (<span class="post-count">1</span>)
              </li>
            </ul>
          </div>

        </div>
      </div>

      <footer class="page-footer">
        <p>© 2009 – <span class="current-year">2014</span> Tom Dalling</p>

        <p class="social">
          <a href="https://twitter.com/tom_dalling">
            <i class="fa fa-lg fa-twitter"></i>
          </a>
          <a href="https://github.com/tomdalling">
            <i class="fa fa-lg fa-github"></i>
          </a>
          <a href="https://stackoverflow.com/users/108105/tom-dalling">
            <i class="fa fa-lg fa-stack-overflow"></i>
          </a>
          <a href="mailto:tom at tomdalling com">
            <i class="fa fa-lg fa-envelope"></i>
          </a>
        </p>
      </footer>

      <script src="/bundles/all.js"></script>
      <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {
            inlineMath: [['$$','$$']],
            displayMath: [['[blockmath]', '[/blockmath]']]
          }
        });
      </script>
      <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </div></body>

</html>